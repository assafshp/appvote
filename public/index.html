<!DOCTYPE html>
<html dir="rtl" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-Labs 2021</title>
    <!-- <link rel="preconnect" href="https://fonts.gstatic.com"> -->
    <!-- <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet"> -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/media-queries.css" />
</head>

<body>

    <!-- APP -->
    <div id="app">
        <div class="app-overlay"></div>
        <!-- HEADER -->
        <header>
            <!-- <a href="#topAnchor"></a>  -->

            <div id="xlogo" class="logo">
                <img src="images/xlabs_icon.png">
            </div>
        </header>
        <!-- MAIN -->
        <main>

            <h1 id="main" class="main-title">זה הזמן להשפיע</h1>
            <h5 id="main1" class="main-title2">אנא הצבע/י לכל אחד מהמיזמים</h5>
            <div id="cards" class="cards" style="opacity: 1;">
                <div class="card" id="0">
                    <div class="card-info">
                        <div class="candidate-info">

                            <img src="images/miba.png" class="app-logo undefined">
                        </div>
                    </div>

                    <button class="card-btn btn-matim" onclick="vote(100,&quot;MiBa&quot;,&quot;0&quot;)">$100</button>
                    <button class="card-btn btn-no-matim" onclick="vote(1000,&quot;MiBa&quot;,&quot;0&quot;)">$1,000</button>
                    <button class="card-btn btn-zorm" onclick="vote(10000,&quot;MiBa&quot;,&quot;0&quot;)">$10,000</button>
                </div>
                ,
                <div class="card" id="1">
                    <div class="card-info">
                        <div class="candidate-info">

                            <img src="images/yarok.png" class="app-logo yarok">
                        </div>
                    </div>

                    <button class="card-btn btn-matim" onclick="vote(100,&quot;YaRock&quot;,&quot;1&quot;)">$100</button>
                    <button class="card-btn btn-no-matim"
                        onclick="vote(1000,&quot;YaRock&quot;,&quot;1&quot;)">$1,000</button>
                    <button class="card-btn btn-zorm" onclick="vote(1000,&quot;YaRock&quot;,&quot;1&quot;)">$10,000</button>
                </div>
                ,
                <div class="card" id="2">
                    <div class="card-info">
                        <div class="candidate-info">

                            <img src="images/beenthere.png" class="app-logo undefined">
                        </div>
                    </div>

                    <button class="card-btn btn-matim" onclick="vote(100,&quot;BeenThere&quot;,&quot;2&quot;)">$100</button>
                    <button class="card-btn btn-no-matim"
                        onclick="vote(1000,&quot;BeenThere&quot;,&quot;2&quot;)">$1,000</button>
                    <button class="card-btn btn-zorm"
                        onclick="vote(10000,&quot;BeenThere&quot;,&quot;2&quot;)">$10,000</button>
                </div>
            </div>
            <div id="endvote" class="main-title endvote" style="display: none;">
                <h4 class="end-text">מעולה, תודה רבה ! </h4>
                <div>
                    <img class="xlabs-logo" src="images/xlabs_icon.png">
                </div>
            </div>
        </main>
    </div>
</body>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
<script defer src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js"></script>
<script>

    const loadEl = document.querySelector('#main');
    const loadEl1 = document.querySelector('#main1');

    let inviteeName = '';
    let voteCount = 0;

    var firebaseConfig = {
        apiKey: "AIzaSyBGvPBIU_J7NHpUqAYxmJm7XHs8JQDJzbQ",
        authDomain: "xappvote.firebaseapp.com",
        projectId: "xappvote",
        storageBucket: "xappvote.appspot.com",
        messagingSenderId: "582541238903",
        appId: "1:582541238903:web:c6ccd79e010899408ddc72"
    };

    var app;
    var db;

    const urlParams = new URLSearchParams(window.location.search);
    const phone = urlParams.get('p');
    console.log(`phone=${phone}`);
    const type = urlParams.get('t');
    let votes = {};
    let event = {};


    let candidates = [
        {
            id: 0,
            name: "MiBa",
            img: "miba.png"
        },
        {
            id: 1,
            name: "YaRock",
            img: "yarok.png",
            class: "yarok"
        },
        {
            id: 2,
            name: "BeenThere",
            img: "beenthere.png"
        }

    ]


    document.addEventListener('DOMContentLoaded', async () => {

        try {
            app = firebase.initializeApp(firebaseConfig);
            db = firebase.firestore(app);

            const loadEl = document.querySelector('#main');

            if (phone) {
                event = (await db.collection('events').doc(phone).get()).data();
                candidates[0].name = event.date;
                candidates[1].name = event.date1;
                candidates[2].name = event.date2;
            }

            switch (type) {
                default:
                    // loadEl.textContent = 'זה הזמן להשפיע';
                    // loadEl1.textContent = 'אנא הצבע/י לכל אחד מהמיזמים';
                    // const cards = document.querySelector('.cards');
                    // document.getElementById('cards').style.opacity = 0;
                    // cards.innerHTML = getCards();
                    // document.getElementById('cards').style.opacity = 1;
                    break;
            }
        } catch (e) {
            console.error(e);
            loadEl.textContent = 'Error';
        }
    });
</script>

<script src="js/functions.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>


</html>